# PokÃ©API ğŸ°âš”ï¸

A **modern, protobuf-driven PokÃ©mon API** written in Go.  
It exposes two core domains:

| Domain   | Version | Summary                                                    |
| -------- | ------- | ---------------------------------------------------------- |
| **Dex**  | `v1`    | Catalog & image metadata for every PokÃ©mon                 |
| **Calc** | `v1`    | Battleâ€oriented calculators (type match-ups, damage, etc.) |

---

## âœ¨ Features

- **gRPC + JSON/REST** gateway out of the box (powered by ConnectRPC).
- **Strict schema-first workflow** â€“ Protocol Buffers managed with Buf.
- **Modular micro-services** (`/services`) so you can run only what you need.
- Auto-generated, fully-typed **Go SDK** (see `schema/gen/go`).
- Reproducible builds via Makefile & Docker.

---

## For Developers ğŸ› ï¸

### Project Layout

```bash
.
â”œâ”€â”€ schema/              # Protobuf sources & code-gen artefacts
â”‚   â”œâ”€â”€ proto/           # â†’ Authoritative *.proto files
â”‚   â”œâ”€â”€ buf.*.yaml       # Buf configs (lint, breaking checks, remote registry)
â”‚   â”œâ”€â”€ gen/go/          # Go code generated by `buf generate`
â”‚   â””â”€â”€ Makefile         # Helper targets (lint, gen, clean)
â”œâ”€â”€ services/            # Individual micro-services (Dex, Calc, â€¦)
â””â”€â”€ README.md
```

### Prerequisites

| Tool     | Minimum Version | Purpose                        |
| -------- | --------------- | ------------------------------ |
| Go       | **1.22**        | Core language/runtime          |
| Buf      | **1.31**        | Protobuf lint & generation     |
| Docker   | 24.x            | Local orchestration (optional) |
| `protoc` | 3.25            | Fallback if you skip Buf       |

### Common Tasks

| Action                    | Command           |
| ------------------------- | ----------------- |
| **Lint all protos**       | `make proto-lint` |
| **Regenerate Go SDK**     | `make gen`        |
| **Run unit tests**        | `go test ./...`   |
| **Spin up every service** | `make up`         |
| **Tear down containers**  | `make down`       |

## API Reference

| Service | Endpoint                   | Notes                                      |
| ------- | -------------------------- | ------------------------------------------ |
| Dex     | `GET /v1/dex/pokemon/{id}` | Returns full PokÃ©mon record                |
|         | `GET /v1/dex/image/{id}`   | Original & thumbnail sprite URLs           |
| Calc    | `POST /v1/calc/attack`     | JSON body `{ attackerType, defenderType }` |

Full protobuf specification lives in schema/proto/\*\*.

## Contributing ğŸ¤

1. Fork Â· create feature branch.
2. `make lint test` must pass.
3. Open PR â€“ GitHub Actions will run Buf breaking checks and unit tests.
4. One maintainer approval â†’ merge.

### Coding Guidelines

- Follow Effective Go + goimports.
- Keep protobuf changes backwardâ€compatible (buf breaking gate).
- One feature / bug-fix per PR.

## Roadmap ğŸ—ºï¸

- Move sets & abilities endpoints
- Competitive match replay parser
- Web UI explorer (Next.js)
- Helm chart & Kustomize overlays for prod deploy
